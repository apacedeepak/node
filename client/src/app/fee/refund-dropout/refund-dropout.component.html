<div class="boxModel pull-left maxHightOuto">
  <div class="headBox mb15">
    <h5 class="pull-left">Refund Student Fee</h5>
  </div>
  <div class="col-xs-12 col-sm-12 col-md-12 pull-left" *ngIf="successmsg !=''">
    <div class="alert alert-success dblock mb25">{{successmsg}}</div>
  </div>
  <div class="col-xs-12 col-sm-12 col-md-12 col-md-3 pull-left" *ngIf="errormsg !=''">
    <div class="alert alert-danger dblock mb25">{{errormsg}}</div>
  </div>
  <div class="clearfix"></div>
  <form class="form-signin" ngNativeValidate [formGroup]="refundForm" (ngSubmit)="onSubmit(refundForm.value)">


    <div class="col-xs-12 col-sm-3 col-md-3 pull-left inputItem">
      <input required type="text" class="form-control cleanup validate-empty width30" formControlName='admission_number' placeholder="Admission Number"
        autofocus="" />
    </div>

    <div class="col-xs-12 col-sm-3 col-md-3 pull-left inputItem">
        <label class="checkBox mt10 mr20">
       <input type="radio" formControlName="action" value="refund" checked />Refund<span class="radiomark"></span>
        </label>
        <label class="checkBox mt">
        <input type="radio" formControlName="action" value="dropout" />Dropout<span class="radiomark"></span>
         </label>
    </div>

       
    <div class="col-xs-12 col-sm-12 col-md-12 pull-left inputItem mt15 text-left mb15">
<input class="btn btn-primary" value="Search" name="submit" id="submit" type="submit">
     
    </div>

  </form>



</div>

<div *ngIf="showStudentDetails" class="communication pull-left" style="margin-top:15px; min-height:inherit">
    
        <div class="headBox">
            <h5 class="h5 pull-left"> Student Personal Details</h5>
        </div>
        <div class="col-sm-12 col-md-12 pull-left text-right margintop20">
            <table class="table table-striped table-bordered">
                <tr>
                    <td>
                        <strong>Name</strong>
                    </td>
                    <td>{{studentDetails.name}}</td>
                    <td rowspan="5">
                        <img class="img-thumbnail" src="{{hostUrl + studentDetails.student_photo}}" alt="Student">
                    </td>
                    <td class="text-center" rowspan="5">
                        <div class="text-left">
                            
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <strong>Class-Section</strong>
                    </td>
                    <td>{{studentDetails.class_section}}</td>
                </tr>
                <tr>

                    <td>
                        <strong>Father Name</strong>
                    </td>
                    <td>{{studentDetails.father_name}}</td>
                </tr>
                <tr>
                    <td>
                        <strong>Admission No.</strong>
                    </td>
                    <td>{{studentDetails.admission_no}}</td>
                </tr>
                <tr>
                    <td>
                        <strong></strong>
                    </td>
                    <td></td>
                </tr>
            </table>
        </div>
    
</div>


<div *ngIf="showStudentDetails" class="communication pull-left" style="margin-top:15px; min-height:inherit">
        <form class="form-signin" ngNativeValidate [formGroup]="requestForm" (ngSubmit)="onRequestSubmit(requestForm.value)">
            <div class="headBox marginbottom20">
                <h5 class="h5 pull-left">Student Fee Detail</h5>
            </div>

            <div class="col-sm-12 col-md-12 pull-left pull-left margintop20">
                <table class="table table-striped table-bordered customTable">
                    <thead class="blueThead">
                        <tr>
                            <td>Fee Head</td>
                            <td>Total Fee</td>
                            <td>Paid Fee</td>
                            <td style="width: 28%;">Refundable</td>
                            
                        </tr>
                    </thead>
                    <tbody>
                        <!-- <tr *ngFor="let item of refundrequest; index as i">


                            <td formArrayName="feeheadnameArr">
                                <input readonly type="text" value="{{item.fee_head_name}}" [formControlName]="i" class="form-control">
                            </td>
                            <td style="display:none" formArrayName="hidArr">
                                <input readonly type="hidden" value="{{item.fee_head_id}}" [formControlName]="i" class="form-control">
                            </td>

                            <td formArrayName="cgstArr">
                                <input readonly type="text" value="{{item.cgst}}" [formControlName]="i" class="form-control">
                            </td>
                            <td formArrayName="sgstArr">
                                <input readonly type="text" value="{{item.sgst}}" [formControlName]="i" class="form-control">
                            </td>
                            <td formArrayName="igstArr">
                                <input readonly type="text" value="{{item.igst}}" [formControlName]="i" class="form-control">
                            </td>


                            <td style="display:none;" formArrayName="termnameidArr">
                                <input readonly type="text" value="{{item.term_name_id}}" [formControlName]="i" class="form-control">
                            </td>
                            <td style="display:none;" formArrayName="termnameArr">
                                <input readonly type="text" value="{{item.term_name}}" [formControlName]="i" class="form-control">
                            </td>
                            <td style="display:none;" formArrayName="termamountArr">
                                <input readonly type="text" value="{{item.term_amount}}" [formControlName]="i" class="form-control">
                            </td>
                            <td formArrayName="originalamountArr">
                                <input readonly type="text" value="{{item.total_due_amount}}" [formControlName]="i" class="form-control">
                            </td>
                            <td formArrayName="amountArr">
                                <input readonly type="text" value="{{item.total_due_amount}}" [formControlName]="i" class="form-control">
                            </td>
                        </tr>

                        <tr>
                            <td colspan="5" class="text-right">Term Wise Total</td>
                            <td>
                                <input readonly type="text" formControlName="termwisetotal" value="{{termwisetotal}}" class="form-control">
                            </td>
                        </tr>
                       
                        <tr> -->
                                <tr *ngFor="let item of refundrequest; index as i">
                                        <td>{{item.fee_head_name}}</td>
                                        <td>{{item.amount}}</td>
                                        <td>{{item.paid_amount}}</td>
                                        <td formArrayName="refundable_amount">
                                            <input readonly type="text" [formControlName]="i" class="form-control">
                                        </td>
                                        
                                    </tr>
                                    <tr>
                                            <td colspan="3" class="text-right">Total refundable Fee</td>
                                            <td>
                                                <input readonly type="text" formControlName="total_refundable_fee" class="form-control">
                                            </td>
                                     </tr>

                                     <tr *ngIf="action == 'refund'">
                                            <td colspan="3" class="text-right">Mode of refund</td>
                                            <td>
                                                <select required class="form-control" formControlName="mode_of_refund" #modeofrefund (change)="setRefundMode(modeofrefund.value)" >
                                                    <option value="Cheque">Cheque</option>
                                                    <option value="NEFT">NEFT</option>
                                                </select>
                                            </td>
                                     </tr>
                                     <tr *ngIf="isRefundMode == 'Cheque' && action == 'refund'">
                                            <td colspan="3" class="text-right">Cheque to be name of</td>
                                            <td>
                                                <input required  type="text" formControlName="cheque_to_be_name_of" class="form-control">
                                            </td>
                                     </tr>
                                     <tr *ngIf="isRefundMode == 'NEFT'">
                                            <td colspan="3" class="text-right">Beneficiary Name</td>
                                            <td>
                                                <input required  type="text" formControlName="beneficiary_name" class="form-control">
                                            </td>
                                     </tr>
                                     <tr *ngIf="isRefundMode == 'NEFT'">
                                            <td colspan="3" class="text-right">Account Number</td>
                                            <td>
                                                <input required type="text" formControlName="account_number" class="form-control">
                                            </td>
                                     </tr>

                                     <tr *ngIf="isRefundMode == 'NEFT'">
                                            <td colspan="3" class="text-right">IFSC</td>
                                            <td>
                                                <input required type="text" formControlName="ifsc" class="form-control">
                                            </td>
                                     </tr>
                                     <tr *ngIf="isRefundMode == 'NEFT'">
                                            <td colspan="3" class="text-right">Bank Name</td>
                                            <td>
                                                <input required type="text" formControlName="bank_name" class="form-control">
                                            </td>
                                     </tr>
                            
                            <tr>
                                <td colspan="3" class="text-right">Remark</td>
                                <td>
                                    <input required type="text" formControlName="remark" class="form-control">
                                </td>
                            </tr>
                            

                    </tbody>
                </table>
                <div class="text-right mb15">
                        <input class="btn btn-primary" value="Submit" name="submit" id="submit" type="submit">
                </div>
            </div>
        </form>
    </div>